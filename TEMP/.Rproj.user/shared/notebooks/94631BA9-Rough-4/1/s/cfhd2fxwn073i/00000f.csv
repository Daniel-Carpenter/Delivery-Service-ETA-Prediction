"0","# Function for data report"
"0","dataQualityReport <- function(df) {"
"0","  "
"0","  # Function to remove any columns with NA"
"0","  removeColsWithNA <- function(df) {"
"0","    return( df[ , colSums(is.na(df)) == 0] )"
"0","  }"
"0","  "
"0","  # Create Comprehensive data report using skimr package"
"0","  # This is done a bit piece-wise because PDF latex does not like the skimr package"
"0","  # Very much. So Instead of printing `skim(df)`, I have to pull the contents manually"
"0","  # Unfortunately. This is not an issue with html typically."
"0","  dataReport <- skim(df) %>%"
"0","    rename_all(~str_replace(.,""skim_"","""")) %>%"
"0","    arrange(type, desc(complete_rate) ) # sort data "
"0","  "
"0","  # Filter to the class types"
"0","  dataReport.numeric <- dataReport %>% filter(type == 'numeric') # numeric data"
"0","  dataReport.factor  <- dataReport %>% filter(type == 'factor' ) # factor  data"
"0","  "
"0","  # Remove columns that do not apply to this type of data -----------------------"
"0","  "
"0","  ## numeric data"
"0","  dataReport.numeric <- removeColsWithNA(dataReport.numeric)  %>%"
"0","    "
"0","    # Clean column names by removing numeric prefix, "
"0","    rename_all(~str_replace(.,""numeric."","""")) "
"0","    "
"0","  ## factor  data"
"0","  dataReport.factor  <- removeColsWithNA(dataReport.factor ) %>%"
"0","  "
"0","    # Clean column names by removing factor  prefix"
"0","    rename_all(~str_replace(.,""factor."",""""))  "
"0","  "
"0","  "
"0","  # Set up options for Display the reports"
"0","  options(skimr_strip_metadata = FALSE)"
"0","  options(digits=2)"
"0","  options(scipen=99)"
"0","  "
"0","  # Numeric report <- Get summary of data frame --------------------------------"
"0","  "
"0","    # data frame stats"
"0","    dfStats.num <- data.frame(Num_Numeric_Variables = ncol(df %>% select_if(is.numeric)),"
"0","                              Total_Observations    = nrow(df) )"
"0","    "
"0","    # Now see individual column statistics"
"0","    dfColStats.num <- dataReport.numeric %>% "
"0","      dplyr::select(-type, -hist)"
"0","    "
"0","  "
"0","  # Factor report <- Get summary of data frame --------------------------------"
"0","  "
"0","    # Get summary of data frame"
"0","    dfStats.factor <- data.frame(Num_Factor_Variables = ncol(df %>% select_if(is.factor)),"
"0","                                 Total_Observations   = nrow(df) )"
"0","    "
"0","    # Now see individual column statistics"
"0","    dfColStats.factor <- dataReport.factor  %>% "
"0","      dplyr::select(-type, -ordered) "
"0","    "
"0","    "
"0","  # Return the data frames"
"0","  return(list('dfStats.num'       = dfStats.num,    "
"0","              'dfColStats.num'    = dfColStats.num,"
"0","              'dfStats.factor'    = dfStats.factor, "
"0","              'dfColStats.factor' = dfColStats.factor))"
"0","}"
